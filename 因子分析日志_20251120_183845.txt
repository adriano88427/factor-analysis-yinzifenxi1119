因子分析日志 - 2025-11-20 18:38:45
============================================================

因子分析程序启动

=== 数据预处理 ===
处理因子: 信号发出时上市天数
  对因子 信号发出时上市天数 进行 standardize 处理
处理因子: 日最大跌幅百分比
  对因子 日最大跌幅百分比 进行 standardize 处理
处理因子: 信号当日收盘涨跌幅
  对因子 信号当日收盘涨跌幅 进行 standardize 处理
处理因子: 信号后一日开盘涨跌幅
  因子 信号后一日开盘涨跌幅: 检测到 20 个3倍标准差异常值 (2.36%)
  对因子 信号后一日开盘涨跌幅 进行 standardize 处理
处理因子: 次日开盘后总体下跌幅度
  因子 次日开盘后总体下跌幅度: 检测到 20 个3倍标准差异常值 (2.36%)
  对因子 次日开盘后总体下跌幅度 进行 standardize 处理
处理因子: 前10日最大涨幅
  因子 前10日最大涨幅: 检测到 13 个3倍标准差异常值 (1.53%)
  对因子 前10日最大涨幅 进行 standardize 处理
处理因子: 当日回调
  因子 当日回调: 检测到 1 个3倍标准差异常值 (0.12%)
  对因子 当日回调 进行 standardize 处理

=== 因子分析选项 ===

可用的因子列表:
1. 信号发出时上市天数
2. 日最大跌幅百分比
3. 信号当日收盘涨跌幅
4. 信号后一日开盘涨跌幅
5. 次日开盘后总体下跌幅度
6. 前10日最大涨幅
7. 当日回调

执行全因子分析...
处理因子: 信号发出时上市天数
处理因子: 日最大跌幅百分比
处理因子: 信号当日收盘涨跌幅
处理因子: 信号后一日开盘涨跌幅
  因子 信号后一日开盘涨跌幅: 检测到 20 个3倍标准差异常值 (2.36%)
处理因子: 次日开盘后总体下跌幅度
  因子 次日开盘后总体下跌幅度: 检测到 20 个3倍标准差异常值 (2.36%)
处理因子: 前10日最大涨幅
  因子 前10日最大涨幅: 检测到 13 个3倍标准差异常值 (1.53%)
处理因子: 当日回调
  因子 当日回调: 检测到 1 个3倍标准差异常值 (0.12%)

===== 因子分析总体样本统计 =====
原始数据总样本数: 849
预处理后数据总样本数: 849
数据保留率: 100.00%
待分析因子数量: 7
因子 信号发出时上市天数: 849 个有效样本 (100.00%)
因子 日最大跌幅百分比: 849 个有效样本 (100.00%)
因子 信号当日收盘涨跌幅: 849 个有效样本 (100.00%)
因子 信号后一日开盘涨跌幅: 849 个有效样本 (100.00%)
因子 次日开盘后总体下跌幅度: 849 个有效样本 (100.00%)
因子 前10日最大涨幅: 849 个有效样本 (100.00%)
因子 当日回调: 849 个有效样本 (100.00%)
收益率列 持股2日收益率: 849 个有效样本 (100.00%)
==================================


开始因子分析，使用 持股2日收益率 作为收益率计算标准
使用 Spearman 相关系数计算IC值

=== 分析因子: 信号发出时上市天数 ===
分析因子: 信号发出时上市天数
计算因子 信号发出时上市天数 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.38181818181818183, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.17575757575757575, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6071428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.08571428571428572, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.02857142857142857, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.11904761904761904, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.7, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.24316221747202582, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.35714285714285715, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5757575757575758, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.10714285714285714, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.16666666666666666, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.38181818181818183, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7090909090909091, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.9, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4072967142656433, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5288778230016562, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
  日期 2023-10-23 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.250316)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.46381682852195877, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07878787878787878, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.05454545454545454, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.38181818181818183, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.051298917604257706, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.35714285714285715, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4072967142656433, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4846990641204805, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.17575757575757575, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9642857142857143, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.16363636363636364, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.03647433262080387, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.14285714285714285, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6071428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.030303030303030304, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.35909242322980395, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
IC计算完成：159/398 个有效交易日
  按日期分组计算IC时出错: len() of unsized object
  修复后daily_ics包含 159 个有效IC值
  额外稳健性统计信息:
    kendall_tau: -0.073
    robust_corr: -0.100
    wilcoxon_test: (np.float64(12243.0), np.float64(0.6277606629910362))
IC分析结果: IC均值=-0.004, IR值=-0.005
使用预处理后的数据进行分组，总样本数: 849
分组完成，共 5 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0103 → 年化0.0020 (0.20%)
      组2: 总收益-0.0028 → 年化-0.0005 (-0.05%)
      组3: 总收益0.0093 → 年化0.0018 (0.18%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 5/5
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002135 (0.2135%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002135 (0.2135%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 5/5
     验证成功率: 100.0%
     年化收益率范围: -0.05% 到 0.41%
     年化收益标准差: 1.145445 (114.5445%)
     年化夏普比率: 0.0018
     年化索提诺比率: 0.0018

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: 0.0111

分组收益分析:
 分组   平均收益  收益标准差  样本数量                参数区间   T统计量    P值    胜率  最大回撤    夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1  0.010  0.082   170   28.0000到1403.0000  1.654 0.100 0.494 0.414  0.127  0.303  0.002      0.002      NaN    1.041   0.002    0.002    1.000      5
  2 -0.003  0.076   170 1407.0000到2184.0000 -0.472 0.638 0.418 0.673 -0.036 -0.066 -0.001     -0.001      NaN    0.976  -0.001   -0.001    1.000      5
  3  0.009  0.097   170 2186.0000到3022.0000  1.250 0.213 0.488 0.464  0.096  0.217  0.002      0.002      NaN    1.240   0.001    0.001    1.000      5
  4  0.017  0.094   170 3023.0000到4168.0000  2.400 0.017 0.553 0.406  0.184  0.426  0.003      0.003      NaN    1.201   0.003    0.003    1.000      5
  5  0.021  0.099   169 4186.0000到5600.0000  2.807 0.006 0.533 0.488  0.216  0.564  0.004      0.004      NaN    1.269   0.003    0.003    1.000      5

多空收益(最高组-最低组): 0.011

=== 分析因子: 日最大跌幅百分比 ===
分析因子: 日最大跌幅百分比
计算因子 日最大跌幅百分比 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.17575757575757575, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.1768325556625402, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
  日期 2020-09-29 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.013435)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.35714285714285715, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6324555320336759, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.23190841426097938, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.23190841426097938, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.023809523809523808, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9486832980505138, 形状=()
  日期 2021-08-18 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.031113)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.20519567041703082, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.32218993815043423, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5030030300035688, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.18845071854082002, 形状=()
  日期 2022-02-07 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.058690)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.7092081432669752, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2621999963272148, 形状=()
  日期 2022-04-28 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.073744)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6584895930536607, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.35032452487268534, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
  日期 2023-06-28 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.071418)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
  日期 2023-12-07 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.096874)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4411764705882353, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.31622776601683794, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.018237166310401936, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.030677155956992438, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.587180674734059, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.20519567041703082, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2896341463414634, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6708203932499369, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1538967528127731, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.10540925533894598, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2883652659957289, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5881992022553729, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4865062298556018, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5723754330538973, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0701219512195122, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.22271770159368698, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4144312328399571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3802900433847583, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.9473684210526315, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
IC计算完成：159/398 个有效交易日
  按日期分组计算IC时出错: len() of unsized object
  修复后daily_ics包含 159 个有效IC值
  额外稳健性统计信息:
    kendall_tau: 0.013
    robust_corr: 0.014
    wilcoxon_test: (np.float64(11792.0), np.float64(0.3006581665762953))
IC分析结果: IC均值=-0.007, IR值=-0.009
使用预处理后的数据进行分组，总样本数: 849
分组完成，共 5 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0114 → 年化0.0022 (0.22%)
      组2: 总收益0.0237 → 年化0.0045 (0.45%)
      组3: 总收益0.0073 → 年化0.0014 (0.14%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 5/5
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002134 (0.2134%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002134 (0.2134%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 5/5
     验证成功率: 100.0%
     年化收益率范围: 0.05% 到 0.45%
     年化收益标准差: 1.145345 (114.5345%)
     年化夏普比率: 0.0018
     年化索提诺比率: 0.0018

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: -0.0005

分组收益分析:
 分组  平均收益  收益标准差  样本数量            参数区间  T统计量    P值    胜率  最大回撤   夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1 0.011  0.094   170 -0.2030到-0.2000 1.573 0.117 0.541 0.775 0.121  0.235  0.002      0.002      NaN    1.204   0.002    0.002    1.000      5
  2 0.024  0.105   170 -0.2000到-0.1910 2.932 0.004 0.565 0.435 0.225  0.510  0.005      0.005      NaN    1.345   0.003    0.003    1.000      5
  3 0.007  0.086   170 -0.1910到-0.1710 1.105 0.271 0.441 0.636 0.085  0.209  0.001      0.001      NaN    1.095   0.001    0.001    1.000      5
  4 0.002  0.075   170 -0.1710到-0.1570 0.405 0.686 0.447 0.676 0.031  0.074  0.000      0.000      NaN    0.960   0.000    0.000    1.000      5
  5 0.011  0.088   169 -0.1570到-0.1400 1.614 0.108 0.491 0.508 0.124  0.310  0.002      0.002      NaN    1.123   0.002    0.002    1.000      5

多空收益(最高组-最低组): -0.000

=== 分析因子: 信号当日收盘涨跌幅 ===
分析因子: 信号当日收盘涨跌幅
计算因子 信号当日收盘涨跌幅 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.14770978917519928, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.08510677611520905, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7142857142857143, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.11595420713048969, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.9856107606091623, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.047619047619047616, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1538967528127731, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
  日期 2021-08-18 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.031113)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6324555320336759, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.46646341463414637, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3353353533357125, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2127669402880226, 形状=()
  日期 2022-02-07 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.058690)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.75, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.048795003647426664, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3100318272768329, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5896683773696626, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5773502691896257, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.31622776601683794, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6829268292682927, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4198250790600938, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
  日期 2023-12-07 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.096874)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.028988551782622423, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.31622776601683794, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.07294866524160774, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.04863244349440517, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4000473456828314, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.13157894736842105, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.116928058579622, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4472135954999579, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3006361283785259, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6065462374963008, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6216120294456303, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.03647433262080387, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.22237479499833035, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6071428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6155870112510924, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
IC计算完成：159/398 个有效交易日
  按日期分组计算IC时出错: len() of unsized object
  修复后daily_ics包含 159 个有效IC值
  额外稳健性统计信息:
    kendall_tau: -0.033
    robust_corr: -0.041
    wilcoxon_test: (np.float64(11668.0), np.float64(0.2355111397581755))
IC分析结果: IC均值=0.088, IR值=0.111
使用预处理后的数据进行分组，总样本数: 849
分组完成，共 5 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0210 → 年化0.0040 (0.40%)
      组2: 总收益0.0089 → 年化0.0017 (0.17%)
      组3: 总收益0.0003 → 年化0.0001 (0.01%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 5/5
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002134 (0.2134%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002134 (0.2134%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 5/5
     验证成功率: 100.0%
     年化收益率范围: 0.01% 到 0.40%
     年化收益标准差: 1.146473 (114.6473%)
     年化夏普比率: 0.0018
     年化索提诺比率: 0.0018

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: -0.0098

分组收益分析:
 分组  平均收益  收益标准差  样本数量            参数区间  T统计量    P值    胜率  最大回撤   夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1 0.021  0.107   170 -0.2020到-0.1990 2.560 0.011 0.529 0.641 0.196  0.453  0.004      0.004      NaN    1.364   0.003    0.003    1.000      5
  2 0.009  0.089   170 -0.1990到-0.1660 1.296 0.197 0.488 0.554 0.099  0.226  0.002      0.002      NaN    1.140   0.001    0.001    1.000      5
  3 0.000  0.081   170 -0.1660到-0.1540 0.049 0.961 0.471 0.720 0.004  0.008  0.000      0.000      NaN    1.034   0.000    0.000    1.000      5
  4 0.014  0.081   170 -0.1540到-0.1460 2.294 0.023 0.500 0.264 0.176  0.365  0.003      0.003      NaN    1.039   0.003    0.003    1.000      5
  5 0.011  0.091   169 -0.1460到-0.1400 1.599 0.112 0.497 0.491 0.123  0.302  0.002      0.002      NaN    1.156   0.002    0.002    1.000      5

多空收益(最高组-最低组): -0.010

=== 分析因子: 信号后一日开盘涨跌幅 ===
分析因子: 信号后一日开盘涨跌幅
计算因子 信号后一日开盘涨跌幅 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.480245379507251, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.34545454545454546, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
  日期 2020-10-23 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.009899)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.03571428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7378647873726218, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3188740696088466, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.898645105261295, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1197626261913259, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.20519567041703082, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.009146341463414634, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.42857142857142855, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.006060606060606061, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.14285714285714285, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.30952380952380953, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6606060606060606, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.16363636363636364, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.36474332620803873, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6363636363636364, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5642880936468347, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5304976669876206, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5151515151515151, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.11585581233062979, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.46169025843831935, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.40476190476190477, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3323218506999783, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6790252825741327, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6484848484848484, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.15151515151515152, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4376919914496465, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.32142857142857145, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.35714285714285715, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.19019836693335312, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8720815992723809, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
IC计算完成：159/398 个有效交易日
  按日期分组计算IC时出错: len() of unsized object
  修复后daily_ics包含 159 个有效IC值
  额外稳健性统计信息:
    kendall_tau: -0.043
    robust_corr: -0.071
    wilcoxon_test: (np.float64(11783.0), np.float64(0.2955603636822124))
IC分析结果: IC均值=-0.024, IR值=-0.030
使用预处理后的数据进行分组，总样本数: 849
分组完成，共 5 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0076 → 年化0.0015 (0.15%)
      组2: 总收益0.0206 → 年化0.0040 (0.40%)
      组3: 总收益0.0023 → 年化0.0005 (0.05%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 5/5
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002134 (0.2134%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002134 (0.2134%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 5/5
     验证成功率: 100.0%
     年化收益率范围: 0.04% 到 0.44%
     年化收益标准差: 1.142756 (114.2756%)
     年化夏普比率: 0.0018
     年化索提诺比率: 0.0018

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: 0.0154

分组收益分析:
 分组  平均收益  收益标准差  样本数量            参数区间  T统计量    P值    胜率  最大回撤   夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1 0.008  0.108   170 -0.2010到-0.0390 0.920 0.359 0.476 0.865 0.071  0.178  0.001      0.001      NaN    1.381   0.001    0.001    1.000      5
  2 0.021  0.089   170 -0.0380到-0.0180 3.032 0.003 0.565 0.376 0.233  0.549  0.004      0.004      NaN    1.133   0.003    0.003    1.000      5
  3 0.002  0.082   170 -0.0180到-0.0050 0.372 0.710 0.424 0.689 0.029  0.064  0.000      0.000      NaN    1.047   0.000    0.000    1.000      5
  4 0.002  0.079   170  -0.0050到0.0070 0.334 0.739 0.435 0.621 0.026  0.056  0.000      0.000      NaN    1.003   0.000    0.000    1.000      5
  5 0.023  0.090   169   0.0070到0.2000 3.325 0.001 0.586 0.480 0.256  0.519  0.004      0.004      NaN    1.151   0.004    0.004    1.000      5

多空收益(最高组-最低组): 0.015

=== 分析因子: 次日开盘后总体下跌幅度 ===
分析因子: 次日开盘后总体下跌幅度
计算因子 次日开盘后总体下跌幅度 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5349568784384569, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.296969696969697, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.14285714285714285, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.047619047619047616, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2370831620352252, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3333333333333333, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.12727272727272726, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.42857142857142855, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.09523809523809523, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7416447632896788, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3939393939393939, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.48632443494405164, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7090909090909091, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.20291986247835694, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.21212121212121213, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.296969696969697, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2127669402880226, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.46169025843831935, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6626987024788349, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0790277206784084, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.06172957114310298, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5636363636363636, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.04242424242424243, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4024390243902439, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4642857142857143, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8214285714285714, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3212121212121212, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8720815992723809, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
IC计算完成：159/398 个有效交易日
  按日期分组计算IC时出错: len() of unsized object
  修复后daily_ics包含 159 个有效IC值
  额外稳健性统计信息:
    kendall_tau: -0.038
    robust_corr: -0.065
    wilcoxon_test: (np.float64(12272.0), np.float64(0.6530665641170341))
IC分析结果: IC均值=0.029, IR值=0.036
使用预处理后的数据进行分组，总样本数: 849
分组完成，共 5 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0176 → 年化0.0034 (0.34%)
      组2: 总收益0.0027 → 年化0.0005 (0.05%)
      组3: 总收益0.0122 → 年化0.0023 (0.23%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 5/5
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002137 (0.2137%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002137 (0.2137%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 5/5
     验证成功率: 100.0%
     年化收益率范围: 0.05% 到 0.34%
     年化收益标准差: 1.146719 (114.6719%)
     年化夏普比率: 0.0018
     年化索提诺比率: 0.0018

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: -0.0027

分组收益分析:
 分组  平均收益  收益标准差  样本数量            参数区间  T统计量    P值    胜率  最大回撤   夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1 0.018  0.108   170 -0.4020到-0.2150 2.133 0.034 0.518 0.638 0.164  0.407  0.003      0.003      NaN    1.377   0.002    0.002    1.000      5
  2 0.003  0.086   170 -0.2140到-0.1820 0.412 0.681 0.471 0.703 0.032  0.065  0.001      0.001      NaN    1.097   0.000    0.000    1.000      5
  3 0.012  0.090   170 -0.1820到-0.1630 1.763 0.080 0.500 0.443 0.135  0.348  0.002      0.002      NaN    1.153   0.002    0.002    1.000      5
  4 0.008  0.077   170 -0.1630到-0.1460 1.370 0.173 0.447 0.531 0.105  0.272  0.002      0.002      NaN    0.981   0.002    0.002    1.000      5
  5 0.015  0.088   169  -0.1460到0.0000 2.209 0.029 0.550 0.591 0.170  0.326  0.003      0.003      NaN    1.126   0.003    0.003    1.000      5

多空收益(最高组-最低组): -0.003

=== 分析因子: 前10日最大涨幅 ===
分析因子: 前10日最大涨幅
计算因子 前10日最大涨幅 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8545454545454545, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7454545454545455, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2571428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.42857142857142855, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.16666666666666666, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.1, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.32218993815043423, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.11904761904761904, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.22424242424242424, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.17857142857142858, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2857142857142857, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3575757575757576, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.18787878787878787, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.480245379507251, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.41818181818181815, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.028988551782622423, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.28484848484848485, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7598819296000807, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07878787878787878, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.1538967528127731, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.09523809523809523, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2553203283456271, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.7, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6584895930536607, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3212121212121212, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8214285714285714, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.006060606060606061, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.10942299786241162, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2857142857142857, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6785714285714286, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.16363636363636364, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9746794344808963, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
IC计算完成：159/398 个有效交易日
  按日期分组计算IC时出错: len() of unsized object
  修复后daily_ics包含 159 个有效IC值
  额外稳健性统计信息:
    kendall_tau: -0.005
    robust_corr: 0.003
    wilcoxon_test: (np.float64(11258.0), np.float64(0.09171676073720025))
IC分析结果: IC均值=0.124, IR值=0.153
使用预处理后的数据进行分组，总样本数: 849
警告: 第5组的参数区间跨度异常大: 4.2840
分组完成，共 5 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益-0.0098 → 年化-0.0019 (-0.19%)
      组2: 总收益0.0150 → 年化0.0029 (0.29%)
      组3: 总收益-0.0013 → 年化-0.0003 (-0.03%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 5/5
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002125 (0.2125%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002125 (0.2125%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 5/5
     验证成功率: 100.0%
     年化收益率范围: -0.19% 到 0.64%
     年化收益标准差: 1.105616 (110.5616%)
     年化夏普比率: 0.0014
     年化索提诺比率: 0.0014

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: 0.0432

分组收益分析:
 分组   平均收益  收益标准差  样本数量          参数区间   T统计量    P值    胜率  最大回撤    夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1 -0.010  0.056   170 0.0280到0.1440 -2.260 0.025 0.418 0.926 -0.173 -0.264 -0.002     -0.002      NaN    0.720  -0.003   -0.003    1.000      5
  2  0.015  0.079   170 0.1450到0.2190  2.480 0.014 0.588 0.327  0.190  0.341  0.003      0.003      NaN    1.006   0.003    0.003    1.000      5
  3 -0.001  0.079   170 0.2190到0.3580 -0.215 0.830 0.465 0.768 -0.016 -0.032 -0.000     -0.000      NaN    1.008  -0.000   -0.000    1.000      5
  4  0.018  0.097   170 0.3580到0.6880  2.468 0.015 0.459 0.442  0.189  0.507  0.004      0.004      NaN    1.240   0.003    0.003    1.000      5
  5  0.033  0.122   169 0.6900到4.9740  3.572 0.000 0.556 0.562  0.275  0.855  0.006      0.006      NaN    1.553   0.004    0.004    1.000      5

多空收益(最高组-最低组): 0.043

=== 分析因子: 当日回调 ===
分析因子: 当日回调
计算因子 当日回调 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.503030303030303, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.09146511499786562, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.35714285714285715, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5428571428571428, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7142857142857143, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.30952380952380953, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.1524390243902439, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3592878785739777, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.10303030303030303, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5585812268712466, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6347419188140273, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.503030303030303, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.12727272727272726, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.24924127290882647, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.17575757575757575, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.028988551782622423, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.41039134083406165, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.17575757575757575, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.17073488132934916, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.12727272727272726, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5642880936468347, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.047619047619047616, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.10670731707317073, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9, 形状=()
  日期 2024-05-14 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.007778)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.20519567041703082, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.41039134083406165, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8207826816681233, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.37426130267530777, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.31098139099274313, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6071428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.48632443494405164, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.13414634146341464, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5357142857142857, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5357142857142857, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5757575757575758, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8720815992723809, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
  日期 2025-09-03 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.002121)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
IC计算完成：159/398 个有效交易日
  按日期分组计算IC时出错: len() of unsized object
  修复后daily_ics包含 159 个有效IC值
  额外稳健性统计信息:
    kendall_tau: -0.038
    robust_corr: -0.037
    wilcoxon_test: (np.float64(12419.0), np.float64(0.7870128333205688))
IC分析结果: IC均值=-0.018, IR值=-0.023
使用预处理后的数据进行分组，总样本数: 849
分组完成，共 5 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益-0.0041 → 年化-0.0008 (-0.08%)
      组2: 总收益0.0016 → 年化0.0003 (0.03%)
      组3: 总收益0.0122 → 年化0.0023 (0.23%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 5/5
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002127 (0.2127%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002127 (0.2127%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 5/5
     验证成功率: 100.0%
     年化收益率范围: -0.08% 到 0.61%
     年化收益标准差: 1.128447 (112.8447%)
     年化夏普比率: 0.0016
     年化索提诺比率: 0.0016

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: 0.0178

分组收益分析:
 分组   平均收益  收益标准差  样本数量          参数区间   T统计量    P值    胜率  最大回撤    夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1 -0.004  0.063   170 0.0000到0.0930 -0.846 0.399 0.441 0.832 -0.065 -0.130 -0.001     -0.001      NaN    0.803  -0.001   -0.001    1.000      5
  2  0.002  0.085   170 0.0930到0.1230  0.250 0.803 0.465 0.759  0.019  0.047  0.000      0.000      NaN    1.089   0.000    0.000    1.000      5
  3  0.012  0.087   170 0.1230到0.1440  1.826 0.070 0.524 0.444  0.140  0.294  0.002      0.002      NaN    1.111   0.002    0.002    1.000      5
  4  0.032  0.097   170 0.1440到0.1650  4.299 0.000 0.571 0.285  0.330  0.829  0.006      0.006      NaN    1.244   0.005    0.005    1.000      5
  5  0.014  0.109   169 0.1650到0.2880  1.636 0.104 0.485 0.706  0.126  0.281  0.003      0.003      NaN    1.394   0.002    0.002    1.000      5

多空收益(最高组-最低组): 0.018
因子分析完成

=== 因子分析汇总报告 ===
       因子名称   IC均值 IC标准差    IR值   t统计量    p值   多空收益
  信号发出时上市天数 -0.004 0.783 -0.005 -0.069 0.945  0.011
   日最大跌幅百分比 -0.007 0.777 -0.009 -0.114 0.909 -0.000
  信号当日收盘涨跌幅  0.088 0.790  0.111  1.403 0.163 -0.010
 信号后一日开盘涨跌幅 -0.024 0.809 -0.030 -0.375 0.708  0.015
次日开盘后总体下跌幅度  0.029 0.809  0.036  0.455 0.650 -0.003
   前10日最大涨幅  0.124 0.809  0.153  1.933 0.055  0.043
       当日回调 -0.018 0.813 -0.023 -0.284 0.777  0.018

汇总报告已保存到 '因子分析汇总_20251120_183852.csv'
Summary DataFrame 实际列名: ['因子名称', 'IC均值', 'IC标准差', 'IR值', 't统计量', 'p值', '多空收益', '综合得分', '评级', '因子类型']
因子分析详细报告已保存到 '因子分析详情_精简版_20251120_183852.txt'

开始对所有因子执行10等分因子分析...

=== 分析因子: 信号发出时上市天数 ===
计算因子 信号发出时上市天数 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.38181818181818183, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.17575757575757575, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6071428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.08571428571428572, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.02857142857142857, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.11904761904761904, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.7, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.24316221747202582, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.35714285714285715, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5757575757575758, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.10714285714285714, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.16666666666666666, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.38181818181818183, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7090909090909091, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.9, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4072967142656433, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5288778230016562, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
  日期 2023-10-23 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.250316)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.46381682852195877, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07878787878787878, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.05454545454545454, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.38181818181818183, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.051298917604257706, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.35714285714285715, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4072967142656433, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4846990641204805, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.17575757575757575, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9642857142857143, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.16363636363636364, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.03647433262080387, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.14285714285714285, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6071428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.030303030303030304, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.35909242322980395, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
IC计算完成：159/398 个有效交易日
IC计算完成：159/398 个有效交易日
  修复后daily_ics包含 159 个有效IC值
使用预处理后的数据进行分组，总样本数: 849
分组完成，共 10 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0077 → 年化0.0015 (0.15%)
      组2: 总收益0.0130 → 年化0.0025 (0.25%)
      组3: 总收益-0.0019 → 年化-0.0004 (-0.04%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 10/10
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002133 (0.2133%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002133 (0.2133%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 10/10
     验证成功率: 100.0%
     年化收益率范围: -0.07% 到 0.45%
     年化收益标准差: 1.140186 (114.0186%)
     年化夏普比率: 0.0018
     年化索提诺比率: 0.0018

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: 0.0118
IC均值: -0.0043
IC标准差: 0.7832
信息比率: -0.0055
多空收益: 0.0118%

10等分分组收益:
 分组   平均收益  收益标准差  样本数量                参数区间   T统计量    P值    胜率  最大回撤    夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1  0.008  0.089    85    28.0000到991.0000  0.792 0.431 0.471 0.406  0.086  0.194  0.001      0.001      NaN    1.139   0.001    0.001    1.000     10
  2  0.013  0.074    85  993.0000到1403.0000  1.633 0.106 0.518 0.414  0.177  0.480  0.003      0.003      NaN    0.939   0.003    0.003    1.000     10
  3 -0.002  0.073    85 1407.0000到1735.0000 -0.234 0.816 0.447 0.552 -0.025 -0.047 -0.000     -0.000      NaN    0.935  -0.000   -0.000    1.000     10
  4 -0.004  0.080    85 1736.0000到2184.0000 -0.423 0.673 0.388 0.626 -0.046 -0.083 -0.001     -0.001      NaN    1.021  -0.001   -0.001    1.000     10
  5  0.016  0.110    85 2186.0000到2613.0000  1.318 0.191 0.494 0.464  0.143  0.364  0.003      0.003      NaN    1.405   0.002    0.002    1.000     10
  6  0.003  0.082    85 2616.0000到3022.0000  0.323 0.748 0.482 0.396  0.035  0.067  0.001      0.001      NaN    1.051   0.001    0.001    1.000     10
  7  0.013  0.099    85 3023.0000到3647.0000  1.250 0.215 0.553 0.406  0.136  0.308  0.003      0.003      NaN    1.265   0.002    0.002    1.000     10
  8  0.021  0.089    85 3652.0000到4168.0000  2.192 0.031 0.553 0.271  0.238  0.595  0.004      0.004      NaN    1.138   0.004    0.004    1.000     10
  9  0.023  0.115    85 4186.0000到4829.0000  1.888 0.062 0.506 0.488  0.205  0.665  0.004      0.004      NaN    1.463   0.003    0.003    1.000     10
 10  0.019  0.082    84 4832.0000到5600.0000  2.175 0.032 0.560 0.400  0.237  0.469  0.004      0.004      NaN    1.045   0.004    0.004    1.000     10
  因子 信号发出时上市天数 的详细分组收益数据将由带参数因子分析器生成

=== 分析因子: 日最大跌幅百分比 ===
计算因子 日最大跌幅百分比 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.17575757575757575, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.1768325556625402, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
  日期 2020-09-29 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.013435)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.35714285714285715, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6324555320336759, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.23190841426097938, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.23190841426097938, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.023809523809523808, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9486832980505138, 形状=()
  日期 2021-08-18 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.031113)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.20519567041703082, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.32218993815043423, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5030030300035688, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.18845071854082002, 形状=()
  日期 2022-02-07 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.058690)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.7092081432669752, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2621999963272148, 形状=()
  日期 2022-04-28 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.073744)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6584895930536607, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.35032452487268534, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
  日期 2023-06-28 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.071418)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
  日期 2023-12-07 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.096874)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4411764705882353, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.31622776601683794, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.018237166310401936, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.030677155956992438, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.587180674734059, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.20519567041703082, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2896341463414634, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6708203932499369, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1538967528127731, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.10540925533894598, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2883652659957289, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5881992022553729, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4865062298556018, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5723754330538973, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0701219512195122, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.22271770159368698, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4144312328399571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3802900433847583, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.9473684210526315, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
IC计算完成：159/398 个有效交易日
IC计算完成：159/398 个有效交易日
  修复后daily_ics包含 159 个有效IC值
使用预处理后的数据进行分组，总样本数: 849
分组完成，共 10 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0145 → 年化0.0028 (0.28%)
      组2: 总收益0.0083 → 年化0.0016 (0.16%)
      组3: 总收益0.0355 → 年化0.0068 (0.68%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 10/10
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002130 (0.2130%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002130 (0.2130%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 10/10
     验证成功率: 100.0%
     年化收益率范围: -0.08% 到 0.68%
     年化收益标准差: 1.137400 (113.7400%)
     年化夏普比率: 0.0017
     年化索提诺比率: 0.0017

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: -0.0051
IC均值: -0.0070
IC标准差: 0.7766
信息比率: -0.0091
多空收益: -0.0051%

10等分分组收益:
 分组   平均收益  收益标准差  样本数量            参数区间   T统计量    P值    胜率  最大回撤    夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1  0.014  0.094    85 -0.2030到-0.2000  1.421 0.159 0.506 0.490  0.154  0.452  0.003      0.003      NaN    1.199   0.002    0.002    1.000     10
  2  0.008  0.095    85 -0.2000到-0.2000  0.803 0.424 0.576 0.593  0.087  0.137  0.002      0.002      NaN    1.214   0.001    0.001    1.000     10
  3  0.035  0.125    85 -0.2000到-0.1990  2.622 0.010 0.518 0.435  0.284  0.930  0.007      0.007      NaN    1.593   0.004    0.004    1.000     10
  4  0.012  0.081    85 -0.1990到-0.1910  1.363 0.177 0.612 0.395  0.148  0.214  0.002      0.002      NaN    1.028   0.002    0.002    1.000     10
  5  0.016  0.088    85 -0.1910到-0.1800  1.687 0.095 0.435 0.395  0.183  0.541  0.003      0.003      NaN    1.130   0.003    0.003    1.000     10
  6 -0.002  0.082    85 -0.1800到-0.1710 -0.186 0.853 0.447 0.622 -0.020 -0.043 -0.000     -0.000      NaN    1.053  -0.000   -0.000    1.000     10
  7 -0.004  0.071    85 -0.1710到-0.1650 -0.544 0.588 0.424 0.485 -0.059 -0.123 -0.001     -0.001      NaN    0.909  -0.001   -0.001    1.000     10
  8  0.009  0.079    85 -0.1650到-0.1570  1.037 0.303 0.471 0.455  0.112  0.310  0.002      0.002      NaN    1.007   0.002    0.002    1.000     10
  9  0.012  0.096    85 -0.1570到-0.1500  1.193 0.236 0.482 0.453  0.129  0.299  0.002      0.002      NaN    1.227   0.002    0.002    1.000     10
 10  0.009  0.079    84 -0.1500到-0.1400  1.084 0.282 0.500 0.299  0.118  0.341  0.002      0.002      NaN    1.013   0.002    0.002    1.000     10
  因子 日最大跌幅百分比 的详细分组收益数据将由带参数因子分析器生成

=== 分析因子: 信号当日收盘涨跌幅 ===
计算因子 信号当日收盘涨跌幅 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.14770978917519928, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.08510677611520905, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7142857142857143, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.11595420713048969, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.9856107606091623, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.047619047619047616, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1538967528127731, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
  日期 2021-08-18 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.031113)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6324555320336759, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.46646341463414637, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3353353533357125, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2127669402880226, 形状=()
  日期 2022-02-07 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.058690)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.75, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.048795003647426664, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3100318272768329, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5896683773696626, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5773502691896257, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.31622776601683794, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6829268292682927, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4198250790600938, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
  日期 2023-12-07 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.096874)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.028988551782622423, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.31622776601683794, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.07294866524160774, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.04863244349440517, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4000473456828314, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.13157894736842105, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.116928058579622, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4472135954999579, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3006361283785259, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6065462374963008, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6216120294456303, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.03647433262080387, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.22237479499833035, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6071428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6155870112510924, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
IC计算完成：159/398 个有效交易日
IC计算完成：159/398 个有效交易日
  修复后daily_ics包含 159 个有效IC值
使用预处理后的数据进行分组，总样本数: 849
警告: 第3组的参数区间跨度异常大: 0.0210
分组完成，共 10 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0052 → 年化0.0010 (0.10%)
      组2: 总收益0.0368 → 年化0.0070 (0.70%)
      组3: 总收益0.0167 → 年化0.0032 (0.32%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 10/10
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002130 (0.2130%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002130 (0.2130%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 10/10
     验证成功率: 100.0%
     年化收益率范围: -0.03% 到 0.70%
     年化收益标准差: 1.137453 (113.7453%)
     年化夏普比率: 0.0017
     年化索提诺比率: 0.0017

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: 0.0138
IC均值: 0.0879
IC标准差: 0.7902
信息比率: 0.1113
多空收益: 0.0138%

10等分分组收益:
 分组   平均收益  收益标准差  样本数量            参数区间   T统计量    P值    胜率  最大回撤    夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1  0.005  0.097    85 -0.2020到-0.2000  0.496 0.621 0.482 0.641  0.054  0.099  0.001      0.001      NaN    1.235   0.001    0.001    1.000     10
  2  0.037  0.115    85 -0.2000到-0.1990  2.959 0.004 0.576 0.436  0.321  0.981  0.007      0.007      NaN    1.462   0.005    0.005    1.000     10
  3  0.017  0.089    85 -0.1990到-0.1780  1.729 0.088 0.553 0.443  0.187  0.428  0.003      0.003      NaN    1.139   0.003    0.003    1.000     10
  4  0.001  0.089    85 -0.1780到-0.1660  0.105 0.917 0.424 0.554  0.011  0.025  0.000      0.000      NaN    1.138   0.000    0.000    1.000     10
  5  0.002  0.087    85 -0.1660到-0.1600  0.252 0.802 0.494 0.591  0.027  0.063  0.000      0.000      NaN    1.105   0.000    0.000    1.000     10
  6 -0.002  0.075    85 -0.1600到-0.1540 -0.214 0.831 0.447 0.416 -0.023 -0.050 -0.000     -0.000      NaN    0.964  -0.000   -0.000    1.000     10
  7  0.010  0.081    85 -0.1540到-0.1500  1.105 0.272 0.494 0.264  0.120  0.251  0.002      0.002      NaN    1.031   0.002    0.002    1.000     10
  8  0.019  0.082    85 -0.1500到-0.1460  2.126 0.036 0.506 0.235  0.231  0.470  0.004      0.004      NaN    1.048   0.003    0.003    1.000     10
  9  0.003  0.068    85 -0.1460到-0.1430  0.451 0.653 0.529 0.404  0.049  0.099  0.001      0.001      NaN    0.862   0.001    0.001    1.000     10
 10  0.019  0.109    84 -0.1430到-0.1400  1.604 0.112 0.464 0.313  0.175  0.476  0.004      0.004      NaN    1.390   0.003    0.003    1.000     10
  因子 信号当日收盘涨跌幅 的详细分组收益数据将由带参数因子分析器生成

=== 分析因子: 信号后一日开盘涨跌幅 ===
计算因子 信号后一日开盘涨跌幅 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.480245379507251, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.34545454545454546, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
  日期 2020-10-23 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.009899)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.03571428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7378647873726218, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3188740696088466, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.898645105261295, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1197626261913259, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.20519567041703082, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.009146341463414634, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.42857142857142855, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.006060606060606061, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.14285714285714285, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.30952380952380953, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6606060606060606, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.16363636363636364, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.36474332620803873, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6363636363636364, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5642880936468347, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5304976669876206, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5151515151515151, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.11585581233062979, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.46169025843831935, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.40476190476190477, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3323218506999783, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6790252825741327, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6484848484848484, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.15151515151515152, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4376919914496465, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.32142857142857145, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.35714285714285715, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.19019836693335312, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8720815992723809, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
IC计算完成：159/398 个有效交易日
IC计算完成：159/398 个有效交易日
  修复后daily_ics包含 159 个有效IC值
使用预处理后的数据进行分组，总样本数: 849
警告: 第1组的参数区间跨度异常大: 0.1380
警告: 第10组的参数区间跨度异常大: 0.1800
分组完成，共 10 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0281 → 年化0.0054 (0.54%)
      组2: 总收益-0.0129 → 年化-0.0025 (-0.25%)
      组3: 总收益0.0277 → 年化0.0053 (0.53%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 10/10
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002127 (0.2127%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002127 (0.2127%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 10/10
     验证成功率: 100.0%
     年化收益率范围: -0.25% 到 0.67%
     年化收益标准差: 1.132473 (113.2473%)
     年化夏普比率: 0.0017
     年化索提诺比率: 0.0017

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: 0.0072
IC均值: -0.0241
IC标准差: 0.8093
信息比率: -0.0297
多空收益: 0.0072%

10等分分组收益:
 分组   平均收益  收益标准差  样本数量            参数区间   T统计量    P值    胜率  最大回撤    夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1  0.028  0.121    85 -0.2010到-0.0630  2.152 0.034 0.518 0.455  0.233  0.765  0.005      0.005      NaN    1.540   0.003    0.003    1.000     10
  2 -0.013  0.090    85 -0.0620到-0.0390 -1.317 0.191 0.435 0.769 -0.143 -0.275 -0.003     -0.003      NaN    1.152  -0.002   -0.002    1.000     10
  3  0.028  0.095    85 -0.0380到-0.0260  2.678 0.009 0.588 0.247  0.290  0.699  0.005      0.005      NaN    1.220   0.004    0.004    1.000     10
  4  0.014  0.081    85 -0.0260到-0.0180  1.533 0.129 0.541 0.376  0.166  0.374  0.003      0.003      NaN    1.038   0.003    0.003    1.000     10
  5  0.007  0.091    85 -0.0180到-0.0120  0.728 0.469 0.435 0.433  0.079  0.181  0.001      0.001      NaN    1.163   0.001    0.001    1.000     10
  6 -0.003  0.072    85 -0.0120到-0.0050 -0.321 0.749 0.412 0.528 -0.035 -0.075 -0.000     -0.000      NaN    0.919  -0.001   -0.001    1.000     10
  7  0.006  0.079    85  -0.0050到0.0000  0.753 0.454 0.435 0.492  0.082  0.206  0.001      0.001      NaN    1.012   0.001    0.001    1.000     10
  8 -0.002  0.078    85   0.0000到0.0070 -0.289 0.773 0.435 0.453 -0.031 -0.062 -0.000     -0.000      NaN    0.996  -0.000   -0.000    1.000     10
  9  0.011  0.086    85   0.0070到0.0200  1.168 0.246 0.518 0.335  0.127  0.248  0.002      0.002      NaN    1.100   0.002    0.002    1.000     10
 10  0.035  0.093    84   0.0200到0.2000  3.487 0.001 0.655 0.480  0.380  0.780  0.007      0.007      NaN    1.186   0.006    0.006    1.000     10
  因子 信号后一日开盘涨跌幅 的详细分组收益数据将由带参数因子分析器生成

=== 分析因子: 次日开盘后总体下跌幅度 ===
计算因子 次日开盘后总体下跌幅度 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5349568784384569, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.296969696969697, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.14285714285714285, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.047619047619047616, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2370831620352252, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3333333333333333, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.12727272727272726, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.42857142857142855, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.09523809523809523, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7416447632896788, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3939393939393939, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.48632443494405164, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7090909090909091, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.20291986247835694, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.1, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.21212121212121213, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.296969696969697, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2127669402880226, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.46169025843831935, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6626987024788349, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0790277206784084, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.06172957114310298, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5636363636363636, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.04242424242424243, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4024390243902439, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4642857142857143, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8214285714285714, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3212121212121212, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8720815992723809, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
IC计算完成：159/398 个有效交易日
IC计算完成：159/398 个有效交易日
  修复后daily_ics包含 159 个有效IC值
使用预处理后的数据进行分组，总样本数: 849
警告: 第1组的参数区间跨度异常大: 0.1450
警告: 第10组的参数区间跨度异常大: 0.1350
分组完成，共 10 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0288 → 年化0.0055 (0.55%)
      组2: 总收益0.0065 → 年化0.0013 (0.13%)
      组3: 总收益-0.0004 → 年化-0.0001 (-0.01%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 10/10
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002135 (0.2135%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002135 (0.2135%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 10/10
     验证成功率: 100.0%
     年化收益率范围: -0.01% 到 0.55%
     年化收益标准差: 1.145412 (114.5412%)
     年化夏普比率: 0.0018
     年化索提诺比率: 0.0018

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: -0.0092
IC均值: 0.0292
IC标准差: 0.8088
信息比率: 0.0360
多空收益: -0.0092%

10等分分组收益:
 分组   平均收益  收益标准差  样本数量            参数区间   T统计量    P值    胜率  最大回撤    夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1  0.029  0.120    85 -0.4020到-0.2570  2.208 0.030 0.529 0.424  0.239  0.780  0.005      0.005      NaN    1.535   0.004    0.004    1.000     10
  2  0.007  0.093    85 -0.2560到-0.2150  0.643 0.522 0.506 0.633  0.070  0.133  0.001      0.001      NaN    1.191   0.001    0.001    1.000     10
  3 -0.000  0.089    85 -0.2140到-0.1950 -0.039 0.969 0.459 0.703 -0.004 -0.008 -0.000     -0.000      NaN    1.132  -0.000   -0.000    1.000     10
  4  0.006  0.084    85 -0.1950到-0.1820  0.641 0.523 0.482 0.438  0.070  0.179  0.001      0.001      NaN    1.067   0.001    0.001    1.000     10
  5  0.011  0.086    85 -0.1820到-0.1720  1.149 0.254 0.506 0.306  0.125  0.324  0.002      0.002      NaN    1.104   0.002    0.002    1.000     10
  6  0.014  0.094    85 -0.1720到-0.1630  1.331 0.187 0.494 0.443  0.144  0.369  0.003      0.003      NaN    1.205   0.002    0.002    1.000     10
  7  0.004  0.078    85 -0.1630到-0.1540  0.481 0.632 0.400 0.431  0.052  0.137  0.001      0.001      NaN    0.996   0.001    0.001    1.000     10
  8  0.012  0.076    85 -0.1540到-0.1460  1.467 0.146 0.494 0.312  0.159  0.402  0.002      0.002      NaN    0.969   0.002    0.002    1.000     10
  9  0.010  0.088    85 -0.1460到-0.1350  1.098 0.275 0.518 0.461  0.119  0.240  0.002      0.002      NaN    1.117   0.002    0.002    1.000     10
 10  0.020  0.089    84  -0.1350到0.0000  2.015 0.047 0.583 0.452  0.220  0.398  0.004      0.004      NaN    1.138   0.003    0.003    1.000     10
  因子 次日开盘后总体下跌幅度 的详细分组收益数据将由带参数因子分析器生成

=== 分析因子: 前10日最大涨幅 ===
计算因子 前10日最大涨幅 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8545454545454545, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7454545454545455, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.07142857142857142, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2571428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.42857142857142855, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.16666666666666666, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.1, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.32218993815043423, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.11904761904761904, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.22424242424242424, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.17857142857142858, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2857142857142857, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3575757575757576, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.18787878787878787, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.480245379507251, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.41818181818181815, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.028988551782622423, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.28484848484848485, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7598819296000807, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.07878787878787878, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.1538967528127731, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.09523809523809523, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2553203283456271, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.7, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6584895930536607, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.3212121212121212, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8214285714285714, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.006060606060606061, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.10942299786241162, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2857142857142857, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.6785714285714286, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.16363636363636364, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9746794344808963, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
IC计算完成：159/398 个有效交易日
IC计算完成：159/398 个有效交易日
  修复后daily_ics包含 159 个有效IC值
使用预处理后的数据进行分组，总样本数: 849
警告: 第10组的参数区间跨度异常大: 4.0290
分组完成，共 10 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益-0.0178 → 年化-0.0035 (-0.35%)
      组2: 总收益-0.0018 → 年化-0.0003 (-0.03%)
      组3: 总收益0.0102 → 年化0.0020 (0.20%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 10/10
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002120 (0.2120%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002120 (0.2120%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 10/10
     验证成功率: 100.0%
     年化收益率范围: -0.35% 到 1.11%
     年化收益标准差: 1.096460 (109.6460%)
     年化夏普比率: 0.0013
     年化索提诺比率: 0.0013

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: 0.0766
IC均值: 0.1240
IC标准差: 0.8089
信息比率: 0.1533
多空收益: 0.0766%

10等分分组收益:
 分组   平均收益  收益标准差  样本数量          参数区间   T统计量    P值    胜率  最大回撤    夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1 -0.018  0.058    85 0.0280到0.1000 -2.823 0.006 0.388 0.804 -0.306 -0.395 -0.003     -0.003      NaN    0.740  -0.005   -0.005    1.000     10
  2 -0.002  0.054    85 0.1010到0.1440 -0.308 0.759 0.447 0.636 -0.033 -0.073 -0.000     -0.000      NaN    0.689  -0.001   -0.001    1.000     10
  3  0.010  0.069    85 0.1450到0.1830  1.374 0.173 0.565 0.277  0.149  0.284  0.002      0.002      NaN    0.877   0.002    0.002    1.000     10
  4  0.020  0.088    85 0.1830到0.2190  2.071 0.041 0.612 0.321  0.225  0.390  0.004      0.004      NaN    1.122   0.003    0.003    1.000     10
  5 -0.007  0.082    85 0.2190到0.2760 -0.771 0.443 0.471 0.716 -0.084 -0.148 -0.001     -0.001      NaN    1.042  -0.001   -0.001    1.000     10
  6  0.004  0.076    85 0.2760到0.3580  0.510 0.611 0.459 0.472  0.055  0.123  0.001      0.001      NaN    0.975   0.001    0.001    1.000     10
  7  0.016  0.095    85 0.3580到0.5020  1.535 0.128 0.494 0.336  0.167  0.361  0.003      0.003      NaN    1.219   0.003    0.003    1.000     10
  8  0.021  0.099    85 0.5060到0.6880  1.939 0.056 0.424 0.442  0.210  0.784  0.004      0.004      NaN    1.268   0.003    0.003    1.000     10
  9  0.008  0.106    85 0.6900到0.9390  0.715 0.476 0.471 0.458  0.078  0.183  0.002      0.002      NaN    1.360   0.001    0.001    1.000     10
 10  0.059  0.131    84 0.9450到4.9740  4.119 0.000 0.643 0.274  0.449  2.127  0.011      0.011      NaN    1.673   0.007    0.007    1.000     10
  因子 前10日最大涨幅 的详细分组收益数据将由带参数因子分析器生成

=== 分析因子: 当日回调 ===
计算因子 当日回调 的 Spearman IC值
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.503030303030303, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.09146511499786562, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.35714285714285715, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5428571428571428, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.7142857142857143, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.30952380952380953, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8660254037844386, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.2, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.1524390243902439, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.3592878785739777, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.10303030303030303, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5585812268712466, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6347419188140273, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.503030303030303, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.12727272727272726, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.24924127290882647, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.17575757575757575, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.028988551782622423, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.41039134083406165, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.17575757575757575, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.17073488132934916, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.12727272727272726, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5642880936468347, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.047619047619047616, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.10670731707317073, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.9, 形状=()
  日期 2024-05-14 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.007778)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.20519567041703082, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.41039134083406165, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.4, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.8207826816681233, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.37426130267530777, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.31098139099274313, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.6071428571428571, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.48632443494405164, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.13414634146341464, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5357142857142857, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5357142857142857, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.5757575757575758, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=0.8720815992723809, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
  日期 2025-09-03 00:00:00: 使用整体数据计算IC (因子std: 0.000000, 收益率std: 0.002121)
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-0.5, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=1.0, 形状=()
    调试: daily_ic类型=<class 'numpy.float64'>, 值=-1.0, 形状=()
IC计算完成：159/398 个有效交易日
IC计算完成：159/398 个有效交易日
  修复后daily_ics包含 159 个有效IC值
使用预处理后的数据进行分组，总样本数: 849
警告: 第10组的参数区间跨度异常大: 0.1010
分组完成，共 10 组，总样本数: 849
  🔍 开始自适应年化计算分析...
    🔍 智能选择最优年化算法...
      ✅ 选择：标准复利年化（数据质量得分: 1.00）
      📊 算法特征分析:
         数据质量得分: 1.00
         频率稳定性得分: 1.00
         观测期长度: 5.18年
         年交易频率: 163.7次
    🔄 开始自适应年化计算优化...
    📊 应用标准复利年化方法...
      组1: 总收益0.0012 → 年化0.0002 (0.02%)
      组2: 总收益-0.0094 → 年化-0.0018 (-0.18%)
      组3: 总收益0.0086 → 年化0.0017 (0.17%)
    📈 计算CAGR复合年化（对比方法）...
    📉 计算年化风险指标...
    ✅ 数据质量评估...
      有效年化计算: 10/10
      验证成功率: 100.0%
      平均年化收益率: 0.21%
    ✅ 自适应年化计算完成
  📊 数据特征分析:
     总交易次数: 849次
     年化交易频率: 163.7次/年
     平均交易间隔: 2.2天
     观测期长度: 5.18年
     持股周期: 2天
     交易频率分类: 高频

  🎯 选择年化算法:
     算法类型: standard_compound
     选择理由: 高质量数据（得分1.00），使用标准复利年化方法（数学最严谨）
     频率基础: 163.7次/年

  🔢 年化计算结果（优化后）:
     🔥 标准复利年化收益率: 0.002125 (0.2125%)
        (数学公式: (1+总收益率)^(1/年数) - 1)
     📈 CAGR复合年化收益率: 0.002125 (0.2125%)
        (对比方法，与标准复利年化数学等价)
     ⚠️  线性年化收益率: 已移除（忽视复利效应）

  📋 数据质量评估:
     有效分组数: 10/10
     验证成功率: 100.0%
     年化收益率范围: -0.18% 到 0.64%
     年化收益标准差: 1.126679 (112.6679%)
     年化夏普比率: 0.0016
     年化索提诺比率: 0.0016

  🔧 计算方法说明:
     ✅ 主要方法: 标准复利年化（数学最严谨）
     📊 对比方法: CAGR复合年化（验证一致性）
     ❌ 已移除: 线性年化方法（忽视复利效应）
     🔍 验证机制: 反向计算验证结果准确性
     📏 方法一致性检验: 1.000000 (应接近1.0)
        ✅ 两种方法结果一致，验证通过
  多空收益（高-低分组）: 0.0098
IC均值: -0.0183
IC标准差: 0.8129
信息比率: -0.0225
多空收益: 0.0098%

10等分分组收益:
 分组   平均收益  收益标准差  样本数量          参数区间   T统计量    P值    胜率  最大回撤    夏普率  索提诺比率  年化收益率  CAGR年化收益率  传统年化收益率  年化收益标准差  年化夏普比率  年化索提诺比率  年化计算成功率  有效分组数
  1  0.001  0.065    85 0.0000到0.0680  0.176 0.861 0.482 0.411  0.019  0.038  0.000      0.000      NaN    0.828   0.000    0.000    1.000     10
  2 -0.009  0.061    85 0.0680到0.0930 -1.425 0.158 0.400 0.715 -0.155 -0.306 -0.002     -0.002      NaN    0.776  -0.002   -0.002    1.000     10
  3  0.009  0.095    85 0.0930到0.1080  0.836 0.406 0.482 0.623  0.091  0.256  0.002      0.002      NaN    1.208   0.001    0.001    1.000     10
  4 -0.005  0.075    85 0.1090到0.1230 -0.654 0.515 0.447 0.656 -0.071 -0.145 -0.001     -0.001      NaN    0.955  -0.001   -0.001    1.000     10
  5  0.015  0.089    85 0.1230到0.1360  1.515 0.134 0.576 0.444  0.164  0.283  0.003      0.003      NaN    1.142   0.002    0.002    1.000     10
  6  0.010  0.085    85 0.1360到0.1440  1.051 0.296 0.471 0.269  0.114  0.316  0.002      0.002      NaN    1.085   0.002    0.002    1.000     10
  7  0.033  0.089    85 0.1440到0.1530  3.458 0.001 0.600 0.261  0.375  1.100  0.006      0.006      NaN    1.135   0.006    0.006    1.000     10
  8  0.031  0.106    85 0.1530到0.1650  2.694 0.009 0.541 0.285  0.292  0.698  0.006      0.006      NaN    1.351   0.004    0.004    1.000     10
  9  0.016  0.099    85 0.1650到0.1870  1.529 0.130 0.518 0.425  0.166  0.319  0.003      0.003      NaN    1.263   0.002    0.002    1.000     10
 10  0.011  0.119    84 0.1870到0.2880  0.848 0.399 0.452 0.706  0.093  0.234  0.002      0.002      NaN    1.522   0.001    0.001    1.000     10
  因子 当日回调 的详细分组收益数据将由带参数因子分析器生成

=== 因子分析结果已保存 ===

开始生成带参数因子综合分析报告...
数据预处理完成，分析使用 849 行有效数据 (删除了 0 行缺失值)
开始生成带参数因子综合分析报告...
分析因子: 信号发出时上市天数
分析因子: 日最大跌幅百分比
分析因子: 信号当日收盘涨跌幅
分析因子: 信号后一日开盘涨跌幅
分析因子: 次日开盘后总体下跌幅度
分析因子: 前10日最大涨幅
分析因子: 当日回调
带参数因子综合分析报告已保存到 '带参数因子综合分析报告_20251120_183859.txt'
详细数据已保存到 '带参数因子分析数据_20251120_183859.csv'
✅ 带参数因子综合分析报告已生成: 带参数因子综合分析报告_20251120_183859.txt
该报告包含以下内容：
  • 因子排行榜（正向和负向因子分别排名）
  • 最优秀因子推荐（3个最优秀的正向和负向因子）
  • 详细因子分析（每个因子的完整指标分析）
  • 分组详细数据（每个因子的10等分分组表现）
  • 投资策略建议（基于因子表现的组合配置建议）
  • 风险提示（使用注意事项）

同时生成的CSV文件：
  • 带参数因子分析数据_[时间戳].csv（综合评分数据）
  • 带参数因子详细分析_[因子名称]_[时间戳].csv（各因子分组数据）

因子分析程序已完成


日志记录结束 - 2025-11-20 18:38:59
============================================================
