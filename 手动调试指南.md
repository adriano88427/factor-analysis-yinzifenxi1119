# MCP File System 手动调试指南

## 🔍 逐步调试方法

让我们用最简单、最直接的方法来解决这个问题，一步步手动执行。

## 第一步：基础环境检查

### 1.1 检查系统环境
打开Windows命令提示符（cmd），执行以下命令：

```bash
node --version
```

**可能的结果：**
- 如果显示版本号（如 v18.17.0）：✅ Node.js已安装
- 如果显示"'node'不是内部或外部命令"：❌ Node.js未安装

### 1.2 如果Node.js未安装
请按以下步骤操作：

1. **下载Node.js**
   - 访问 https://nodejs.org/zh-cn/
   - 点击"下载并安装LTS版本"
   - 保存到本地文件夹

2. **安装Node.js**
   - 双击下载的.msi文件
   - 按照向导完成安装（选择默认选项即可）
   - 安装完成后**重启计算机**

3. **验证安装**
   ```bash
   node --version
   npm --version
   ```

## 第二步：检查项目文件

### 2.1 进入正确的目录
在命令提示符中，导航到包含`mcp-filesystem`文件夹的目录：

```bash
cd /d "你的项目路径"
dir
```

确保能看到`mcp-filesystem`文件夹。

### 2.2 检查MCP文件结构
```bash
cd mcp-filesystem
dir
```

应该看到以下文件：
- `index.js`
- `package.json`

## 第三步：配置npm镜像源

### 3.1 检查当前npm配置
```bash
npm config get registry
```

### 3.2 配置淘宝镜像
```bash
npm config set registry https://registry.npmmirror.com
npm config set disturl https://npmmirror.com/dist
npm config set electron_mirror https://npmmirror.com/mirrors/electron/
npm config set sass_binary_site https://npmmirror.com/mirrors/node-sass/
```

### 3.3 验证配置
```bash
npm config get registry
```

应该显示：`https://registry.npmmirror.com/`

## 第四步：安装依赖包

### 4.1 清理缓存（可选）
```bash
npm cache clean --force
```

### 4.2 安装依赖
```bash
npm install
```

**这个步骤可能会花几分钟，请耐心等待。**

### 4.3 检查安装结果
```bash
dir node_modules
```

应该看到`@modelcontextprotocol`文件夹。

## 第五步：测试MCP服务器

### 5.1 检查修复的package.json
```bash
type package.json
```

确认内容中没有`"type": "module"`这一行。

### 5.2 尝试启动MCP服务器
```bash
node index.js
```

**预期结果：**
- 如果成功：会看到类似"Filesystem MCP server running on stdio"的消息
- 如果失败：会显示具体的错误信息

## 🚨 如果遇到问题，请告诉我

### 请告诉我：
1. **第一步的结果**：Node.js版本信息
2. **第二步的结果**：mcp-filesystem目录内容
3. **第三步的结果**：npm registry配置结果
4. **第四步的结果**：npm install的执行结果
5. **第五步的结果**：node index.js的输出

### 常见错误及解决：

#### 错误1：npm不是内部或外部命令
**解决方案**：重新安装Node.js，确保勾选了npm选项

#### 错误2：权限拒绝
**解决方案**：以管理员身份运行命令提示符

#### 错误3：网络连接问题
**解决方案**：
- 检查网络连接
- 尝试使用手机热点
- 联系网络管理员确认npm访问权限

#### 错误4：依赖安装失败
**解决方案**：
```bash
# 删除node_modules文件夹重新安装
rmdir /s node_modules
npm install
```

## 📝 调试日志

为了更好地诊断问题，请将每一步的输出复制粘贴给我。包括：
- 命令输入
- 命令输出
- 任何错误信息

这样我就能准确定位问题所在并提供针对性的解决方案。
